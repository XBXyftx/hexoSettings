/* 瀑布流首页样式 - 优化版 */
$waterfallEnable = hexo-config('cover.index_enable')

#recent-posts.waterfall-masonry
  // 轮播图样式重置
  .blog-slider
    width: 100% !important
    max-width: none !important
    margin-bottom: 20px !important
    
  // 瀑布流容器
  .waterfall-container
    position: relative !important
    width: 100% !important
    margin-bottom: 40px
    min-height: 400px
    overflow: visible !important
    box-sizing: border-box
    
    // 瀑布流项目基础样式
    .waterfall-item
      // 移除所有可能冲突的定位样式，让JS完全控制
      position: static // 初始状态为静态，JS会改为绝对定位
      display: block !important
      visibility: visible !important
      box-sizing: border-box !important
      margin: 0 !important
      padding: 0 !important
      border: none !important
      outline: none !important
      float: none !important
      clear: none !important
      
      // 卡片包装器样式
      .post-card-wrapper
        background: rgba(255, 255, 255, 0.05)
        backdrop-filter: blur(20px)
        border-radius: 16px
        overflow: hidden
        border: 1px solid rgba(255, 255, 255, 0.1)
        transition: all 0.3s ease
        height: auto
        display: flex
        flex-direction: column
        box-sizing: border-box
        
        &:hover
          transform: translateY(-5px)
          box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3)
          border-color: rgba(255, 255, 255, 0.2)
          background: rgba(255, 255, 255, 0.08)
          
        // 封面图片
        .post_cover
          width: 100%
          height: 200px
          overflow: hidden
          position: relative
          order: 0
          
          a
            display: block
            width: 100%
            height: 100%
            
          img
            width: 100%
            height: 100%
            object-fit: cover
            transition: transform 0.3s ease
            
          &:hover img
            transform: scale(1.05)
            
        // 文章信息
        .recent-post-info
          padding: 20px
          flex: 1
          display: flex
          flex-direction: column
          position: relative
          
          .article-title
            margin-bottom: 12px
            
            a
              color: var(--font-color)
              font-size: 16px
              font-weight: 600
              line-height: 1.4
              text-decoration: none
              display: -webkit-box
              -webkit-line-clamp: 2
              -webkit-box-orient: vertical
              overflow: hidden
              transition: color 0.3s ease
              
              &:hover
                color: var(--theme-color)
                
          .article-meta
            display: flex
            flex-wrap: wrap
            gap: 8px
            margin-bottom: 10px
            font-size: 12px
            color: rgba(255, 255, 255, 0.6)
            
            .article-meta__info
              display: flex
              align-items: center
              gap: 4px
              
              i
                font-size: 11px
                
            .tags
              display: flex
              flex-wrap: wrap
              gap: 6px
              
              .article-meta__tags
                background: rgba(74, 144, 226, 0.1)
                color: #4a90e2
                padding: 2px 8px
                border-radius: 12px
                font-size: 11px
                text-decoration: none
                transition: all 0.3s ease
                
                &:hover
                  background: rgba(74, 144, 226, 0.2)
                  transform: scale(1.05)
          
          .content
            color: var(--font-color)
            font-size: 13px
            line-height: 1.5
            opacity: 0.8
            display: -webkit-box
            -webkit-line-clamp: 3
            -webkit-box-orient: vertical
            overflow: hidden
            margin-top: auto

// 响应式布局 - 移除宽度设置，让JS完全控制
@media (min-width: 1400px)
  #recent-posts.waterfall-masonry .waterfall-container .waterfall-item
    // JS会设置宽度，这里不需要CSS干预

@media (max-width: 768px)
  #recent-posts.waterfall-masonry .waterfall-container .waterfall-item
    // JS会设置宽度，这里不需要CSS干预
    
    .post-card-wrapper
      .post_cover
        height: 180px
      
      .recent-post-info
        padding: 15px
        
        .article-title a
          font-size: 15px

@media (max-width: 600px)
  #recent-posts.waterfall-masonry .waterfall-container .waterfall-item
    // JS会设置宽度，这里不需要CSS干预
    
    .post-card-wrapper
      .post_cover
        height: 150px
      
      .recent-post-info
        padding: 12px
        
        .article-title a
          font-size: 14px

// 确保侧边栏不受影响
.layout
  display: flex
  
  #recent-posts.waterfall-masonry
    flex: 1
    
  .aside-content
    flex-shrink: 0
    width: var(--aside-content-width, 300px)
    margin-left: 20px
    
    +maxWidth1024()
      display: none

// 分页组件样式
#recent-posts.waterfall-masonry
  #pagination
    display: block !important
    visibility: visible !important
    margin-top: 40px
    clear: both
    position: relative !important
    z-index: 10
    
    .pagination
      display: flex !important
      justify-content: center !important
      align-items: center !important
      gap: 10px
      
      .page-number, .extend
        display: inline-block !important
        visibility: visible !important
        opacity: 1 !important
        
      .current
        background: var(--theme-color) !important
        color: #fff !important
        
      .extend
        color: var(--font-color) !important
        
        &:hover
          color: var(--theme-color) !important

// 移除所有可能干扰JS布局的强制样式
#recent-posts.waterfall-masonry
  .waterfall-container
    .waterfall-item
      // 让JS完全控制定位，移除所有CSS定位干扰
      &.positioned
        // 只保留必要的显示样式，位置由JS控制 